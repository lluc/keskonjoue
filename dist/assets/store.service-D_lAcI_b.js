const Ge=a=>typeof a,Be="",Dn=Ge(Be),$n=Ge(!0),Gn=Ge(0),eo=Ge(Ge),va="type",Fe="default",Na="Listener",Mn="Result",Qa="add",ta="Ids",Oe="Table",ao=Oe+"s",no=Oe+ta,ra="Row",Fn=ra+"Count",Nn=ra+ta,oo="Sorted"+ra+ta,Ua="Cell",wa=Ua+ta,Xa="Value",to=Xa+"s",ro=Xa+ta,G=a=>Be+a,ja=Math.max,Da=Math.min,so=isFinite,Qn=(a,t)=>a instanceof t,k=a=>a==null,Q=(a,t,d)=>k(a)?d==null?void 0:d():t(a),Hn=a=>a==Dn||a==$n,je=a=>Ge(a)==eo,za=a=>Array.isArray(a),Ha=(a,t,d)=>a.slice(t,d),ze=a=>a.length,io=()=>{},co=(a,t)=>a.includes(t),Ca=(a,t)=>a.every(t),Kn=(a,t)=>ze(a)===ze(t)&&Ca(a,(d,_)=>t[_]===d),An=(a,t)=>Ca(a,(d,_)=>_==0||t(a[_-1],d)<=0),Ka=(a,t)=>a.sort(t),we=(a,t)=>a.forEach(t),aa=(a,t)=>a.map(t),Jn=a=>lo(a,(t,d)=>t+d,0),qn=a=>ze(a)==0,lo=(a,t,d)=>a.reduce(t,d),Re=(a,...t)=>a.push(...t),uo=a=>a.shift(),He=Object,_o=He.keys,bo=He.isFrozen,Ba=He.freeze,Yn=a=>Qn(a,He)&&a.constructor==He,ea=(a,t)=>!k(((d,_)=>Q(d,m=>m[_]))(a,t)),On=(a,t)=>(delete a[t],a),Ce=(a,t)=>aa(He.entries(a),([d,_])=>t(_,d)),Te=a=>Yn(a)&&(t=>ze(_o(t)))(a)==0,xa=a=>(a==null?void 0:a.size)??0,ee=(a,t)=>(a==null?void 0:a.has(t))??!1,C=a=>k(a)||xa(a)==0,na=a=>[...(a==null?void 0:a.values())??[]],Ta=a=>a.clear(),g=(a,t)=>a==null?void 0:a.forEach(t),xe=(a,t)=>a==null?void 0:a.delete(t),u=a=>new Map(a),Qe=a=>[...(a==null?void 0:a.keys())??[]],c=(a,t)=>a==null?void 0:a.get(t),_e=(a,t)=>g(a,(d,_)=>t(_,d)),h=(a,t,d)=>k(d)?(xe(a,t),a):a==null?void 0:a.set(t,d),de=(a,t,d)=>(ee(a,t)||h(a,t,d()),c(a,t)),Ne=(a,t,d,_=h)=>(Ce(t,(m,S)=>d(a,S,m)),_e(a,m=>ea(t,m)?0:_(a,m)),a),Se=(a,t,d)=>{const _={};return g(a,(m,S)=>{const T=t?t(m,S):m;!(d!=null&&d(T,m))&&(_[S]=T)}),_},qa=(a,t,d)=>Se(a,_=>Se(_,t,d),Te),Sa=(a,t,d)=>Se(a,_=>qa(_,t,d),Te),De=(a,t)=>{const d=u();return g(a,(_,m)=>d.set(m,(t==null?void 0:t(_))??_)),d},Ya=a=>De(a,De),Ga=a=>De(a,Ya),oa=(a,t,d,_,m=0)=>Q((d?de:c)(a,t[m],m>ze(t)-2?d:u),S=>{if(m>ze(t)-2)return _!=null&&_(S)&&h(a,t[m]),S;const T=oa(S,t,d,_,m+1);return C(S)&&h(a,t[m]),T}),Ye=a=>{const t=Ge(a);return Hn(t)||t==Gn&&so(a)?t:void 0},Oa=(a,t,d,_,m)=>k(m)?a.delCell(t,d,_,!0):a.setCell(t,d,_,m),Pn=(a,t,d)=>k(d)?a.delValue(t):a.setValue(t,d),se=a=>new Set(za(a)||k(a)?a:[a]),ae=(a,t)=>a==null?void 0:a.add(t),Za=(a,t,d,_,m)=>{const S=a.hasRow,T=u(),B=u(),J=u(),H=u(),x=u(),V=u(),K=(y,j,...X)=>{const f=de(V,y,se);return we(X,P=>ae(f,P)&&j&&a.callListener(P)),X},F=(y,...j)=>Q(c(V,y),X=>{we(qn(j)?na(X):j,f=>{a.delListener(f),xe(X,f)}),C(X)&&h(V,y)}),ie=(y,j)=>{h(T,y,j),ee(B,y)||(h(B,y,t()),h(H,y,u()),h(x,y,u()),m(J))},me=y=>{h(T,y),h(B,y),h(H,y),h(x,y),F(y),m(J)};return[()=>a,()=>Qe(T),y=>_e(B,y),y=>ee(B,y),y=>c(T,y),y=>c(B,y),(y,j)=>h(B,y,j),ie,(y,j,X,f,P)=>{ie(y,j);const q=u(),s=u(),i=c(H,y),I=c(x,y),D=R=>{const W=he=>a.getCell(j,R,he),ne=c(i,R),ue=S(j,R)?d(f(W,R)):void 0;if(ne===ue||za(ne)&&za(ue)&&Kn(ne,ue)||h(q,R,[ne,ue]),!k(P)){const he=c(I,R),Z=S(j,R)?P(W,R):void 0;he!=Z&&h(s,R,Z)}},E=R=>{X(()=>{g(q,([,W],ne)=>h(i,ne,W)),g(s,(W,ne)=>h(I,ne,W))},q,s,i,I,R),Ta(q),Ta(s)};_e(i,D),a.hasTable(j)&&we(a.getRowIds(j),R=>{ee(i,R)||D(R)}),E(!0),F(y),K(y,0,a.addRowListener(j,null,(R,W,ne)=>D(ne)),a.addTableListener(j,()=>E()))},me,y=>_(y,J),()=>_e(V,me),K,F]},Wa=(a,t)=>Ge(a)==Dn?d=>d(a):a??(()=>t??Be),$a=a=>{const t=new WeakMap;return d=>(t.has(d)||t.set(d,a(d)),t.get(d))},mo=/^\d+$/,Wn=()=>{const a=[];let t=0;return[d=>(d?uo(a):null)??Be+t++,d=>{mo.test(d)&&ze(a)<1e3&&Re(a,d)}]},en=a=>{let t;const[d,_]=Wn(),m=u();return[(S,T,B,J=[],H=()=>[])=>{t??(t=a());const x=d(1);return h(m,x,[S,T,B,J,H]),ae(oa(T,B??[Be],se),x),x},(S,T,...B)=>we(((J,H=[Be])=>{const x=[],V=(K,F)=>F==ze(H)?Re(x,K):H[F]===null?g(K,ie=>V(ie,F+1)):we([H[F],null],ie=>V(c(K,ie),F+1));return V(J,0),x})(S,T),J=>g(J,H=>c(m,H)[0](t,...T??[],...B))),S=>Q(c(m,S),([,T,B])=>(oa(T,B??[Be],void 0,J=>(xe(J,S),C(J)?1:0)),h(m,S),_(S),B)),S=>Q(c(m,S),([T,,B=[],J,H])=>{const x=(...V)=>{var F;const K=ze(V);K==ze(B)?T(t,...V,...H(V)):k(B[K])?we(((F=J[K])==null?void 0:F.call(J,...V))??[],ie=>x(...V,ie)):x(...V,B[K])};x()})]},Un=(a,t)=>(a??0)<(t??0)?-1:1,ho=$a(a=>{const t=u(),d=u(),[_,m,S]=en(()=>X),[T,B,J,H,x,V,K,,F,ie,me,y]=Za(a,u,f=>k(f)?Be:za(f)?aa(f,G):G(f),_,m),j=(f,P,q)=>{const s=x(f);g(q,(i,I)=>P(I,D=>g(i,E=>D(E,R=>a.forEachCell(s,E,R)))))},X={setIndexDefinition:(f,P,q,s,i,I=Un)=>{const D=k(i)?void 0:([E],[R])=>i(E,R);return F(f,P,(E,R,W,ne,ue,he)=>{let Z=0;const oe=se(),Y=se(),re=V(f);if(g(R,([U,v],M)=>{const A=se(U),N=se(v);g(A,z=>xe(N,z)?xe(A,z):0),g(A,z=>{ae(oe,z),Q(c(re,z),w=>{xe(w,M),C(w)&&(h(re,z),Z=1)})}),g(N,z=>{ae(oe,z),ee(re,z)||(h(re,z,se()),Z=1),ae(c(re,z),M),k(s)||ae(Y,z)})}),E(),C(ue)||(he?_e(re,U=>ae(Y,U)):_e(W,U=>Q(c(ne,U),v=>ae(Y,v))),g(Y,U=>{const v=(A,N)=>I(c(ue,A),c(ue,N),U),M=[...c(re,U)];An(M,v)||(h(re,U,se(Ka(M,v))),ae(oe,U))})),(Z||he)&&!k(D)){const U=[...re];An(U,D)||(K(f,u(Ka(U,D))),Z=1)}Z&&m(t,[f]),g(oe,U=>m(d,[f,U]))},Wa(q),Q(s,Wa)),X},delIndexDefinition:f=>(ie(f),X),getStore:T,getIndexIds:B,forEachIndex:f=>J((P,q)=>f(P,s=>j(P,s,q))),forEachSlice:(f,P)=>j(f,P,V(f)),hasIndex:H,hasSlice:(f,P)=>ee(V(f),P),getTableId:x,getSliceIds:f=>Qe(V(f)),getSliceRowIds:(f,P)=>na(c(V(f),P)),addIndexIdsListener:me,addSliceIdsListener:(f,P)=>_(P,t,[f]),addSliceRowIdsListener:(f,P,q)=>_(q,d,[f,P]),delListener:f=>(S(f),X),destroy:y,getListenerStats:()=>({})};return Ba(X)}),Io=u([["avg",[(a,t)=>Jn(a)/t,(a,t,d)=>a+(t-a)/(d+1),(a,t,d)=>a+(a-t)/(d-1),(a,t,d,_)=>a+(t-d)/_]],["max",[a=>ja(...a),(a,t)=>ja(t,a),(a,t)=>t==a?void 0:a,(a,t,d)=>d==a?void 0:ja(t,a)]],["min",[a=>Da(...a),(a,t)=>Da(t,a),(a,t)=>t==a?void 0:a,(a,t,d)=>d==a?void 0:Da(t,a)]],["sum",[a=>Jn(a),(a,t)=>a+t,(a,t)=>a-t,(a,t,d)=>a-d+t]]]),go=(a,t,d,_,m,S=!1)=>{if(C(d))return;const[T,B,J,H]=m;return S||(S=k(a)),g(_,([x,V])=>{S||(a=k(x)?B==null?void 0:B(a,V,t++):k(V)?J==null?void 0:J(a,x,t--):H==null?void 0:H(a,V,x,t),S||(S=k(a)))}),S?T(na(d),xa(d)):a};u();u();const vo=$a(a=>{const t=a.createStore,d=t(),_=t(),m=u(),{addListener:S,callListeners:T,delListener:B}=_,[J,H,x,V,K,,,F,,ie,me,y,j,X]=Za(a,()=>!0,io,S,T),f=(i,I,...D)=>we(D,E=>ae(de(de(m,I,u),i,se),E)),P=i=>{Q(c(m,i),I=>{_e(I,(D,E)=>g(E,R=>D.delListener(R))),Ta(I)}),we([_,d],I=>I.delTable(i))},q=(i,I,D)=>f(I,i,I.addStartTransactionListener(D.startTransaction),I.addDidFinishTransactionListener(()=>D.finishTransaction())),s={setQueryDefinition:(i,I,D)=>{F(i,I),P(i);const E=[],R=[[null,[I,null,null,[],u()]]],W=[],ne=[],ue=[];D({select:(v,M)=>{const A=je(v)?[ze(E)+Be,v]:[k(M)?v:M,N=>N(v,M)];return Re(E,A),{as:N=>A[0]=N}},join:(v,M,A)=>{const N=k(A)||je(M)?null:M,z=k(N)?M:A,w=[v,[v,N,je(z)?z:O=>O(z),[],u()]];return Re(R,w),{as:O=>w[0]=O}},where:(v,M,A)=>Re(W,je(v)?v:k(A)?N=>N(v)===M:N=>N(v,M)===A),group:(v,M,A,N,z)=>{const w=[v,[v,je(M)?[M,A,N,z]:c(Io,M)??[(O,ce)=>ce]]];return Re(ne,w),{as:O=>w[0]=O}},having:(v,M)=>Re(ue,je(v)?v:A=>A(v)===M)});const he=u(E);if(C(he))return s;const Z=u(R);_e(Z,(v,[,M])=>Q(c(Z,M),({3:A})=>k(v)?0:Re(A,v)));const oe=u(ne);let Y=d;if(C(oe)&&qn(ue))Y=_;else{q(i,Y,_);const v=u();_e(oe,(z,[w,O])=>ae(de(v,w,se),[z,O]));const M=se();_e(he,z=>ee(v,z)?0:ae(M,z));const A=u(),N=(z,w,O,ce)=>Q(z,([pe,ke,le,Ie])=>{_e(w,(ye,[be])=>{const ve=de(pe,ye,u),Ee=c(ve,O),Me=ce?void 0:be;if(Ee!==Me){const da=se([[Ee,Me]]),sa=xa(ve);h(ve,O,Me),g(c(v,ye),([We,Ke])=>{const Ae=go(Ie[We],sa,ve,da,Ke);Ie[We]=k(Ye(Ae))?null:Ae})}}),C(ke)||!Ca(ue,ye=>ye(be=>Ie[be]))?_.delRow(i,le):k(le)?z[2]=_.addRow(i,Ie):_.setRow(i,le,Ie)});f(Y,i,Y.addRowListener(i,null,(z,w,O,ce)=>{const pe=[],ke=[],le=u(),Ie=Y.hasRow(i,O);let ye=!Ie;g(M,be=>{const[ve,Ee,Me]=ce(i,O,be);Re(pe,Ee),Re(ke,Me),ye||(ye=ve)}),_e(v,be=>{const[ve,,Ee]=ce(i,O,be);(ye||ve)&&h(le,be,[Ee])}),ye&&N(oa(A,pe,void 0,([,be])=>(xe(be,O),C(be))),le,O,1),Ie&&N(oa(A,ke,()=>{const be={};return g(M,ve=>be[ve]=Y.getCell(i,O,ve)),[u(),se(),void 0,be]},([,be])=>{ae(be,O)}),le,O)}))}q(i,a,Y);const re=(v,M,A,N)=>{const z=w=>a.getCell(M,A,w);we(N,w=>{const[O,,ce,pe,ke]=c(Z,w),le=ce==null?void 0:ce(z,v),[Ie,ye]=c(ke,v)??[];le!=Ie&&(k(ye)||X(i,ye),h(ke,v,k(le)?null:[le,...j(i,1,a.addRowListener(O,le,()=>re(v,O,le,pe)))]))}),(w=>{const O=(ce,pe)=>{var ke,le,Ie;return a.getCell(...k(pe)?[I,w,ce]:ce===I?[I,w,pe]:[(ke=c(Z,ce))==null?void 0:ke[0],(Ie=c((le=c(Z,ce))==null?void 0:le[4],w))==null?void 0:Ie[0],pe])};Y.transaction(()=>Ca(W,ce=>ce(O))?_e(he,(ce,pe)=>Oa(Y,i,w,ce,pe(O,w))):Y.delRow(i,w))})(v)},{3:U}=c(Z,null);return Y.transaction(()=>j(i,1,a.addRowListener(I,null,(v,M,A)=>{a.hasRow(I,A)?re(A,I,A,U):(Y.delRow(i,A),g(Z,({4:N})=>Q(c(N,A),([,z])=>{X(i,z),h(N,A)})))}))),s},delQueryDefinition:i=>(P(i),ie(i),s),getStore:J,getQueryIds:H,forEachQuery:x,hasQuery:V,getTableId:K,addQueryIdsListener:i=>me(()=>i(s)),delListener:i=>(B(i),s),destroy:y,getListenerStats:()=>{const{tables:i,tableIds:I,transaction:D,...E}=_.getListenerStats();return E}};return Ce({[Oe]:[1,1],[Oe+wa]:[0,1],[Fn]:[0,1],[Nn]:[0,1],[oo]:[0,5],[ra]:[1,2],[wa]:[0,2],[Ua]:[1,3]},([i,I],D)=>{we(i?["get","has","forEach"]:["get"],E=>s[E+Mn+D]=(...R)=>_[E+D](...R)),s[Qa+Mn+D+Na]=(...E)=>_[Qa+D+Na](...Ha(E,0,I),(R,...W)=>E[I](s,...W),!0)}),Ba(s)}),po=$a(a=>{const t=u(),d=u(),_=u(),m=u(),[S,T,B]=en(()=>q),[J,H,x,V,K,F,,,ie,me,y,j]=Za(a,()=>[u(),u(),u(),u()],s=>k(s)?void 0:s+Be,S,T),X=(s,i,I)=>Q(F(s),([D,,E])=>{if(!ee(E,i)){const R=se();if(K(s)!=P(s))ae(R,i);else{let W=i;for(;!k(W)&&!ee(R,W);)ae(R,W),W=c(D,W)}if(I)return R;h(E,i,R)}return c(E,i)}),f=(s,i)=>Q(F(s),([,,I])=>h(I,i)),P=s=>c(t,s),q={setRelationshipDefinition:(s,i,I,D)=>(h(t,s,I),ie(s,i,(E,R)=>{const W=se(),ne=se(),ue=se(),[he,Z]=F(s);g(R,([oe,Y],re)=>{k(oe)||(ae(ne,oe),Q(c(Z,oe),U=>{xe(U,re),C(U)&&h(Z,oe)})),k(Y)||(ae(ne,Y),ee(Z,Y)||h(Z,Y,se()),ae(c(Z,Y),re)),ae(W,re),h(he,re,Y),_e(c(m,s),U=>{ee(X(s,U),re)&&ae(ue,U)})}),E(),g(W,oe=>T(d,[s,oe])),g(ne,oe=>T(_,[s,oe])),g(ue,oe=>{f(s,oe),T(m,[s,oe])})},Wa(D)),q),delRelationshipDefinition:s=>(h(t,s),me(s),q),getStore:J,getRelationshipIds:H,forEachRelationship:s=>x(i=>s(i,I=>a.forEachRow(K(i),I))),hasRelationship:V,getLocalTableId:K,getRemoteTableId:P,getRemoteRowId:(s,i)=>{var I;return c((I=F(s))==null?void 0:I[0],i)},getLocalRowIds:(s,i)=>{var I;return na(c((I=F(s))==null?void 0:I[1],i))},getLinkedRowIds:(s,i)=>k(F(s))?[i]:na(X(s,i,!0)),addRelationshipIdsListener:y,addRemoteRowIdListener:(s,i,I)=>S(I,d,[s,i]),addLocalRowIdsListener:(s,i,I)=>S(I,_,[s,i]),addLinkedRowIdsListener:(s,i,I)=>(X(s,i),S(I,m,[s,i])),delListener:s=>(f(...B(s)??[]),q),destroy:j,getListenerStats:()=>({})};return Ba(q)}),ka=a=>[a,a],ge=()=>[u(),u()],jn=a=>[...a],Ra=([a,t])=>a===t,qe=a=>JSON.stringify(a,(t,d)=>Qn(d,Map)?He.fromEntries([...d]):d),Fa=JSON.parse,Pe=(a,t,d)=>k(a)||!Yn(a)||Te(a)||bo(a)?(d==null||d(),!1):(Ce(a,(_,m)=>{t(_,m)||On(a,m)}),!Te(a)),$e=(a,t,d)=>h(a,t,c(a,t)==-d?void 0:d),Xn=()=>{let a,t,d=!1,_=!1,m=0;const S=u(),T=u(),B=u(),J=u(),H=u(),x=u(),V=u(),K=u(),F=u(),ie=u(),me=u(),y=u(),j=u(),X=u(),f=se(),P=u(),q=u(),s=u(),i=u(),I=ge(),D=ge(),E=ge(),R=ge(),W=ge(),ne=ge(),ue=ge(),he=ge(),Z=ge(),oe=ge(),Y=ge(),re=ge(),U=ge(),v=ge(),M=ge(),A=u(),N=ge(),[z,w,O,ce]=en(()=>fe),pe=e=>{if(!Pe(e,(o,r)=>co([va,Fe],r)))return!1;const n=e[va];return!(!Hn(n)&&n!=Gn||(Ye(e[Fe])!=n&&On(e,Fe),0))},ke=(e,n)=>(!a||ee(me,n)||Je(n))&&Pe(e,(o,r)=>le(n,r,o),()=>Je(n)),le=(e,n,o,r)=>Pe(r?o:ve(o,e,n),(l,b)=>Q(Ie(e,n,b,l),p=>(o[b]=p,!0),()=>!1),()=>Je(e,n)),Ie=(e,n,o,r)=>a?Q(c(c(me,e),o),l=>Ye(r)!=l[va]?Je(e,n,o,r,l[Fe]):r,()=>Je(e,n,o,r)):k(Ye(r))?Je(e,n,o,r):r,ye=(e,n)=>Pe(n?e:Ee(e),(o,r)=>Q(be(r,o),l=>(e[r]=l,!0),()=>!1),()=>Ue()),be=(e,n)=>t?Q(c(j,e),o=>Ye(n)!=o[va]?Ue(e,n,o[Fe]):n,()=>Ue(e,n)):k(Ye(n))?Ue(e,n):n,ve=(e,n,o)=>(Q(c(y,n),([r,l])=>{g(r,(b,p)=>{ea(e,p)||(e[p]=b)}),g(l,b=>{ea(e,b)||Je(n,o,b)})}),e),Ee=e=>(t&&(g(X,(n,o)=>{ea(e,o)||(e[o]=n)}),g(f,n=>{ea(e,n)||Ue(n)})),e),Me=e=>Ne(me,e,(n,o,r)=>{const l=u(),b=se();Ne(de(me,o,u),r,(p,L,$)=>{h(p,L,$),Q($[Fe],Le=>h(l,L,Le),()=>ae(b,L))}),h(y,o,[l,b])},(n,o)=>{h(me,o),h(y,o)}),da=e=>Ne(j,e,(n,o,r)=>{h(j,o,r),Q(r[Fe],l=>h(X,o,l),()=>ae(f,o))},(n,o)=>{h(j,o),h(X,o),xe(f,o)}),sa=e=>Te(e)?pa():Ia(e),We=e=>Ne(s,e,(n,o,r)=>Ke(o,r),(n,o)=>dn(o)),Ke=(e,n)=>Ne(de(s,e,()=>(un(e,1),h(P,e,Wn()),h(q,e,u()),u())),n,(o,r,l)=>Ae(e,o,r,l),(o,r)=>sn(e,o,r)),Ae=(e,n,o,r,l)=>Ne(de(n,o,()=>(_n(e,o,1),u())),r,(b,p,L)=>Va(e,o,b,p,L),(b,p)=>cn(e,n,o,b,p,l)),Va=(e,n,o,r,l)=>{ee(o,r)||bn(e,n,r,1);const b=c(o,r);l!==b&&(mn(e,n,r,b,l),h(o,r,l))},nn=(e,n,o,r,l)=>Q(c(n,o),b=>Va(e,o,b,r,l),()=>Ae(e,n,o,ve({[r]:l},e,o))),on=e=>Te(e)?fa():ga(e),tn=e=>Ne(i,e,(n,o,r)=>ia(o,r),(n,o)=>ln(o)),ia=(e,n)=>{ee(i,e)||hn(e,1);const o=c(i,e);n!==o&&(In(e,o,n),h(i,e,n))},rn=(e,n)=>{const[o]=c(P,e),r=o(n);return ee(c(s,e),r)?rn(e,n):r},ca=e=>c(s,e)??Ke(e,{}),dn=e=>Ke(e,{}),sn=(e,n,o)=>{const[,r]=c(P,e);r(o),Ae(e,n,o,{},!0)},cn=(e,n,o,r,l,b)=>{var $;const p=c(($=c(y,e))==null?void 0:$[0],l);if(!k(p)&&!b)return Va(e,o,r,l,p);const L=Le=>{mn(e,o,Le,c(r,Le)),bn(e,o,Le,-1),h(r,Le)};k(p)?L(l):_e(r,L),C(r)&&(_n(e,o,-1),C(h(n,o))&&(un(e,-1),h(s,e),h(P,e),h(q,e)))},ln=e=>{const n=c(X,e);if(!k(n))return ia(e,n);In(e,c(i,e)),hn(e,-1),h(i,e)},un=(e,n)=>$e(S,e,n),_n=(e,n,o)=>$e(de(J,e,u),n,o)&&h(B,e,de(B,e,()=>0)+o),bn=(e,n,o,r)=>{const l=c(q,e),b=c(l,o)??0;(b==0&&r==1||b==1&&r==-1)&&$e(de(T,e,u),o,r),h(l,o,b!=-r?b+r:null),$e(de(de(H,e,u),n,u),o,r)},mn=(e,n,o,r,l)=>de(de(de(x,e,u),n,u),o,()=>[r,0])[1]=l,hn=(e,n)=>$e(V,e,n),In=(e,n,o)=>de(K,e,()=>[n,0])[1]=o,Je=(e,n,o,r,l)=>(Re(de(de(de(F,e,u),n,u),o,()=>[]),r),l),Ue=(e,n,o)=>(Re(de(ie,e,()=>[]),n),o),la=(e,n,o)=>Q(c(c(c(x,e),n),o),([r,l])=>[!0,r,l],()=>[!1,...ka(ma(e,n,o))]),gn=e=>Q(c(K,e),([n,o])=>[!0,n,o],()=>[!1,...ka(ha(e))]),pn=e=>C(F)||C(Y[e])?0:g(e?Ga(F):F,(n,o)=>g(n,(r,l)=>g(r,(b,p)=>w(Y[e],[o,l,p],b)))),fn=e=>C(ie)||C(re[e])?0:g(e?De(ie):ie,(n,o)=>w(re[e],[o],n)),Xe=(e,n,o)=>{if(!C(n))return w(e,o,()=>Se(n)),1},Ln=e=>{const n=C(ue[e]),o=C(Z[e])&&C(R[e])&&C(W[e])&&C(ne[e])&&n&&C(D[e]),r=C(oe[e])&&C(he[e])&&C(E[e])&&C(I[e]);if(!o||!r){const l=e?[De(S),Ya(T),De(B),Ya(J),Ga(H),Ga(x)]:[S,T,B,J,H,x];if(!o){Xe(D[e],l[0]),g(l[1],(p,L)=>Xe(R[e],p,[L])),g(l[2],(p,L)=>{p!=0&&w(W[e],[L],vn(L))});const b=se();g(l[3],(p,L)=>{Xe(ne[e],p,[L])&&!n&&(w(ue[e],[L,null]),ae(b,L))}),n||g(l[5],(p,L)=>{if(!ee(b,L)){const $=se();g(p,Le=>g(Le,([La,ya],Ze)=>ya!==La?ae($,Ze):xe(Le,Ze))),g($,Le=>w(ue[e],[L,Le]))}}),g(l[4],(p,L)=>g(p,($,Le)=>Xe(Z[e],$,[L,Le])))}if(!r){let b;g(l[5],(p,L)=>{let $;g(p,(Le,La)=>{let ya;g(Le,([Ze,En],Zn)=>{En!==Ze&&(w(oe[e],[L,La,Zn],En,Ze,la),b=$=ya=1)}),ya&&w(he[e],[L,La],la)}),$&&w(E[e],[L],la)}),b&&w(I[e],void 0,la)}}},yn=e=>{const n=C(v[e]),o=C(M[e])&&C(U[e]);if(!n||!o){const r=e?[De(V),De(K)]:[V,K];if(n||Xe(v[e],r[0]),!o){let l;g(r[1],([b,p],L)=>{p!==b&&(w(M[e],[L],p,b,gn),l=1)}),l&&w(U[e],void 0,gn)}}},te=(e,...n)=>(Pa(()=>e(...aa(n,G))),fe),ua=()=>[Se(x,(e,n)=>c(S,n)===-1?null:Se(e,(o,r)=>c(c(J,n),r)===-1?null:Se(o,([,l])=>l??null,(l,b)=>Ra(b)),Te),Te),Se(K,([,e])=>e??null,(e,n)=>Ra(n))],_a=()=>({cellsTouched:d,valuesTouched:_,changedCells:Sa(x,jn,Ra),invalidCells:Sa(F),changedValues:Se(K,jn,Ra),invalidValues:Se(ie),changedTableIds:Se(S),changedRowIds:qa(J),changedCellIds:Sa(H),changedValueIds:Se(V)}),Ea=()=>Sa(s),Ve=()=>Qe(s),vn=e=>xa(c(s,G(e))),ba=e=>Qe(c(s,G(e))),Ma=(e,n,o,r=0,l)=>{return aa(Ha(Ka((b=c(s,G(e)),p=(L,$)=>[k(n)?$:c(L,G(n)),$],aa([...(b==null?void 0:b.entries())??[]],([L,$])=>p($,L))),([L],[$])=>Un(L,$)*(o?-1:1)),r,k(l)?l:r+l),([,L])=>L);var b,p},Sn=(e,n)=>Qe(c(c(s,G(e)),G(n))),ma=(e,n,o)=>c(c(c(s,G(e)),G(n)),G(o)),Aa=()=>Se(i),kn=()=>Qe(i),ha=e=>c(i,G(e)),Ia=e=>te(()=>(n=>Pe(n,ke,Je))(e)?We(e):0),ga=e=>te(()=>ye(e)?tn(e):0),Rn=e=>{try{sa(Fa(e))}catch{}return fe},wn=e=>te(()=>{if((a=Pe(e,n=>Pe(n,pe)))&&(Me(e),!C(s))){const n=Ea();pa(),Ia(n)}}),zn=e=>te(()=>{if(t=(n=>Pe(n,pe))(e)){const n=Aa();Ja(),fa(),t=!0,da(e),ga(n)}}),pa=()=>te(()=>We({})),Cn=e=>te(n=>ee(s,n)?dn(n):0,e),Tn=(e,n)=>te((o,r)=>Q(c(s,o),l=>ee(l,r)?sn(o,l,r):0),e,n),fa=()=>te(()=>tn({})),Bn=()=>te(()=>{Me({}),a=!1}),Ja=()=>te(()=>{da({}),t=!1}),Pa=(e,n)=>{if(m!=-1){xn();const o=e();return Vn(n),o}},xn=()=>(m!=-1&&m++,m==1&&w(A,void 0,ua,_a),fe),Vn=e=>(m>0&&(m--,m==0&&(d=!C(x),_=!C(K),m=1,pn(1),d&&Ln(1),fn(1),_&&yn(1),e!=null&&e(ua,_a)&&(g(x,(n,o)=>g(n,(r,l)=>g(r,([b],p)=>Oa(fe,o,l,p,b)))),g(K,([n],o)=>Pn(fe,o,n)),d=_=!1),w(N[0],void 0,ua,_a),m=-1,pn(0),d&&Ln(0),fn(0),_&&yn(0),w(N[1],void 0,ua,_a),m=0,d=_=!1,we([S,T,B,J,H,x,F,V,K,ie],Ta))),fe),fe={getContent:()=>[Ea(),Aa()],getTables:Ea,getTableIds:Ve,getTable:e=>qa(c(s,G(e))),getTableCellIds:e=>Qe(c(q,G(e))),getRowCount:vn,getRowIds:ba,getSortedRowIds:Ma,getRow:(e,n)=>Se(c(c(s,G(e)),G(n))),getCellIds:Sn,getCell:ma,getValues:Aa,getValueIds:kn,getValue:ha,hasTables:()=>!C(s),hasTable:e=>ee(s,G(e)),hasTableCell:(e,n)=>ee(c(q,G(e)),G(n)),hasRow:(e,n)=>ee(c(s,G(e)),G(n)),hasCell:(e,n,o)=>ee(c(c(s,G(e)),G(n)),G(o)),hasValues:()=>!C(i),hasValue:e=>ee(i,G(e)),getTablesJson:()=>qe(s),getValuesJson:()=>qe(i),getJson:()=>qe([s,i]),getTablesSchemaJson:()=>qe(me),getValuesSchemaJson:()=>qe(j),getSchemaJson:()=>qe([me,j]),hasTablesSchema:()=>a,hasValuesSchema:()=>t,setContent:([e,n])=>te(()=>{(Te(e)?pa:Ia)(e),(Te(n)?fa:ga)(n)}),setTables:Ia,setTable:(e,n)=>te(o=>ke(n,o)?Ke(o,n):0,e),setRow:(e,n,o)=>te((r,l)=>le(r,l,o)?Ae(r,ca(r),l,o):0,e,n),addRow:(e,n,o=!0)=>Pa(()=>{let r;return le(e,r,n)&&(e=G(e),Ae(e,ca(e),r=rn(e,o?1:0),n)),r}),setPartialRow:(e,n,o)=>te((r,l)=>{if(le(r,l,o,1)){const b=ca(r);Ce(o,(p,L)=>nn(r,b,l,L,p))}},e,n),setCell:(e,n,o,r)=>te((l,b,p)=>Q(Ie(l,b,p,je(r)?r(ma(l,b,p)):r),L=>nn(l,ca(l),b,p,L)),e,n,o),setValues:ga,setPartialValues:e=>te(()=>ye(e,1)?Ce(e,(n,o)=>ia(o,n)):0),setValue:(e,n)=>te(o=>Q(be(o,je(n)?n(ha(o)):n),r=>ia(o,r)),e),setTransactionChanges:e=>te(()=>{Ce(e[0],(n,o)=>k(n)?Cn(o):Ce(n,(r,l)=>k(r)?Tn(o,l):Ce(r,(b,p)=>Oa(fe,o,l,p,b)))),Ce(e[1],(n,o)=>Pn(fe,o,n))}),setTablesJson:Rn,setValuesJson:e=>{try{on(Fa(e))}catch{}return fe},setJson:e=>te(()=>{try{const[n,o]=Fa(e);sa(n),on(o)}catch{Rn(e)}}),setTablesSchema:wn,setValuesSchema:zn,setSchema:(e,n)=>te(()=>{wn(e),zn(n)}),delTables:pa,delTable:Cn,delRow:Tn,delCell:(e,n,o,r)=>te((l,b,p)=>Q(c(s,l),L=>Q(c(L,b),$=>ee($,p)?cn(l,L,b,$,p,r):0)),e,n,o),delValues:fa,delValue:e=>te(n=>ee(i,n)?ln(n):0,e),delTablesSchema:Bn,delValuesSchema:Ja,delSchema:()=>te(()=>{Bn(),Ja()}),transaction:Pa,startTransaction:xn,finishTransaction:Vn,forEachTable:e=>g(s,(n,o)=>e(o,r=>g(n,(l,b)=>r(b,p=>_e(l,p))))),forEachTableCell:(e,n)=>_e(c(q,G(e)),n),forEachRow:(e,n)=>g(c(s,G(e)),(o,r)=>n(r,l=>_e(o,l))),forEachCell:(e,n,o)=>_e(c(c(s,G(e)),G(n)),o),forEachValue:e=>_e(i,e),addSortedRowIdsListener:(e,n,o,r,l,b,p)=>{let L=Ma(e,n,o,r,l);return z(()=>{const $=Ma(e,n,o,r,l);Kn($,L)||(L=$,b(fe,e,n,o,r,l,L))},ue[p?1:0],[e,n],[Ve])},addStartTransactionListener:e=>z(e,A),addWillFinishTransactionListener:e=>z(e,N[0]),addDidFinishTransactionListener:e=>z(e,N[1]),callListener:e=>(ce(e),fe),delListener:e=>(O(e),fe),getListenerStats:()=>({}),createStore:Xn,addListener:z,callListeners:w};return Ce({[ao]:[0,I],[no]:[0,D],[Oe]:[1,E,[Ve]],[Oe+wa]:[1,R,[Ve]],[Fn]:[1,W,[Ve]],[Nn]:[1,ne,[Ve]],[ra]:[2,he,[Ve,ba]],[wa]:[2,Z,[Ve,ba]],[Ua]:[3,oe,[Ve,ba,Sn],e=>ka(ma(...e))],InvalidCell:[3,Y],[to]:[0,U],[ro]:[0,v],[Xa]:[1,M,[kn],e=>ka(ha(e[0]))],InvalidValue:[1,re]},([e,n,o,r],l)=>{fe[Qa+l+Na]=(...b)=>z(b[e],n[b[e+1]?1:0],e>0?Ha(b,0,e):void 0,o,r)}),Ba(fe)},fo=[{dance:{andro:{name:"An dro"},avant_deux:{name:"Avant-deux"},bourree_2t:{name:"Bourrée à 2 temps"},bourree_3t:{name:"Bourrée à 3 temps"},bourree_rond:{name:"Bourrée en rond"},branle_1:{name:"Branle simple"},branle_2:{name:"Branle double"},branle_coupe:{name:"Branle coupé"},branle_noirmoutier:{name:"Branle de Noirmoutier"},cercle_circassien:{name:"Cercle circassien"},cochinchine:{name:"Cochinchine"},colo:{name:"Colo"},gavotte:{name:"Gavotte"},gigue:{name:"Gigue"},hanterdro:{name:"Hanter-dro"},hornpipe:{name:"Hornpipe"},klezmer:{name:"Klezmer"},koast_ar_hoat:{name:"Koast ar Hoat"},marchoise:{name:"Marchoise"},mazurka:{name:"Mazurka"},polka:{name:"Polka"},rond_argenton:{name:"Rond d'Argenton"},rond_barbatre:{name:"Rond de Barbâtre"},rond_ile_yeu:{name:"Rond de l'Ile d'Yeu"},rond_Landeda:{name:"Rond de Landeda"},rond_saint_vincent:{name:"Rond de Saint-Vincent"},ronde_quercy:{name:"Ronde du Quercy"},scottish:{name:"Scottish"},scottish_valse:{name:"Scottish valse"},suite_landeda:{name:"Suite de Landeda"},tricot:{name:"Tricot"},valse:{name:"Valse"},valse_ecoss:{name:"Valse écossaise"},n_c:{name:"N.C. : non classées"}},music:{alunelul:{danceId:"klezmer",name:"Alunelul",notation:"alunelul.abc"},amazone:{danceId:"ronde_quercy",name:"Amazone",notation:"amazone.abc",youtube:"S_WT2flpM-g",authors:"Cyrille Brotto",rights:1},around_fairy_fort:{danceId:"hornpipe",name:"Around the Fairy Fort",notation:"around_the_fairy_fort.abc"},avantdeux_bourdonneau:{danceId:"avant_deux",name:"Avant-deux à Bourdonneau"},avantdeux_travers:{danceId:"avant_deux",name:"Avant-deux de travers",notation:"avant_deux_de_travers.abc"},bal_limousine:{danceId:"marchoise",name:"Bal Limousine",notation:"bal_limousine.abc"},blue_eyed_stranger:{danceId:"scottish",name:"Blue eyed stranger",notation:"blue_eyed_stranger.abc"},bourre_julie:{danceId:"bourree_3t",name:"Bourrée à Julie"},bourree_aurore_sand:{danceId:"bourree_2t",name:"Bourrée Aurore Sand",notation:"bourree_aurore_sand.abc"},bourree_chambery:{danceId:"bourree_2t",name:"Bourrée de Chambery"},bourree_chapelotte:{danceId:"bourree_3t",name:"La Chapelotte",notation:"chapelotte.abc"},bourree_chaudoux:{danceId:"bourree_3t",name:"Bourrée de Chaudoux"},bourree_dindes:{danceId:"bourree_rond",name:"Bourrée des dindes",notation:"bourree_dindes.abc",test:"test",youtube:"LffnyPxNlz8"},bourree_long_chemin:{danceId:"bourree_2t",name:"Bourrée le long du chemin",notation:"bourre_long_chemin.abc"},bourree_malochet:{danceId:"bourree_2t",name:"Bourrée à Malochet",notation:"bourree_malochet.abc",youtube:"klYKgSP9nAk"},bourree_nasbinals:{danceId:"bourree_3t",name:"Bourrée de Nasbinals",notation:"bourree_nasbinals.abc",youtube:"WS0JG_B9wGM"},bourree_planiere:{danceId:"bourree_3t",name:"La Planière"},bourree_reuilly:{danceId:"bourree_2t",name:"Bourrée de Reuilly",notation:"bourree_reuilly.abc"},bourree_rivarennes:{danceId:"bourree_2t",name:"Bourrée chaînée de Rivarennes",notation:"bourree_rivarennes.abc"},bourree_sabotee:{danceId:"bourree_3t",name:"La Sabotée",notation:"bourree_sabotee.abc",youtube:"K0CNLqMpLlY"},bourree_sans_souci:{authors:"Gian Marco Pietrasanta",danceId:"bourree_3t",name:"Bourrée Sans-Souci",notation:"bourree_sans_souci.abc",rights:1,youtube:"azjunXwTyqg"},bourree_valsee_issoudun:{danceId:"bourree_3t",name:"Bourrée valsée d'Issoudun",notation:"bourree_valsee_issoudun.abc",youtube:"ygxUOwcuQAs"},brande_ardentes:{danceId:"bourree_rond",name:"Brande d'Ardentes",notation:"brande_ardentes.abc"},branle_cassandre:{danceId:"branle_coupe",name:"Cassandre",youtube:"WABxoSE13yo"},branle_cosnay:{danceId:"bourree_2t",name:"Branle de Cosnay"},branle_ecosse:{danceId:"branle",name:"Branle d'Écosse"},branle_parlement:{danceId:"branle_parlement",name:"Branle du parlement",notation:"branle_parlement.abc"},branle_rat:{name:"Branle du rat",notation:"branle_du_rat.abc",youtube:"_bSHjxZ84ho"},branle_simple:{danceId:"branle",name:"Branle simple"},carriole:{name:"Carriole",notation:"carriole.abc"},cercle_galicien:{danceId:"cercle_circassien",name:"Cercle galicien"},coast_ar_houet:{danceId:"coast_ar_hoet",name:"Coast ar Houet",notation:"coast_ar_houet.abc"},cochinchine:{danceId:"cochinchine",name:"Cochinchine",notation:"cochinchine.abc"},colo_srem:{danceId:"colo",name:"Colo de Srem",notation:"colo_de_srem.abc"},crouzade:{danceId:"bourree_3t",name:"Crouzade",notation:"crouzade.abc"},czardash:{name:"Csárdás",notation:"czardash.abc"},danse_ours:{danceId:"polka",name:"Danse de l'ours",notation:"dance_de_l_ours.abc"},dis_moi_donc_suzon:{danceId:"scottish_valse",name:"Dis-moi donc Suzon",notation:"dis_moi_donc_suzon.abc"},echelle_jacob:{danceId:"klezmer",name:"L'Echelle de Jacob",notation:"echelle_jacob.abc",youtube:"3E__XPoQBBU"},ecoland:{danceId:"valse_ecoss",name:"Ecoland (Fanny Power)",notation:"ecoland_fanny_power.abc"},el_pelotazo:{danceId:"cercle_circassien",name:"El Pelotazo",notation:"el_pelotazo.abc"},en_avant_blonde:{danceId:"valse",name:"En Avant Blonde",notation:"en_avant_blonde.abc"},en_passant_rivière:{danceId:"bourree_2t",name:"En passant la rivière / Ton ruban bleu",notation:"en_passant_par_la_riviere_et_le_ruban_bleu.abc"},escholiers:{danceId:"mazurka",name:"Les Escholiers de Saint-Genest",notation:"escholiers_de_saint_genest.abc",youtube:"UD1GgTQuzSY"},gars_plaimpied:{danceId:"bourree_3t",name:"Hardi les gars d'Plaimpied",notation:"gars_plaimpied.abc"},gavinette:{danceId:"scottish",name:"Gavinette",notation:"gavinette.abc"},grand_frise:{danceId:"mazurka",name:"Grand frisé",notation:"grand_frise.abc"},grandes_poteries:{danceId:"bourree_3t",name:"Les grandes poteries",notation:"grandes_poteries.abc",youtube:"7hqgbkhjFXE&list"},grand_rouge:{danceId:"mazurka",name:"Grand Rouge",notation:"grand_rouge.abc"},Josefin_waltz:{danceId:"valse",name:"Josefin Waltz",notation:"josefin_s_waltz.abc"},koast_ar_hoat:{danceId:"kost_ar_hoat",name:"Koast ar Hoat",notation:"koast_ar_c_hoat.abc"},lilting_banshee:{danceId:"gigue",name:"Lilting Banshee",notation:"lilting_banshee.abc"},limoise:{danceId:"mazurka",name:"La Limoise",notation:"inconnu_de_limoise.abc"},maris_wedding:{danceId:"polka",name:"Mari's Wedding",notation:"maris_wedding.abc"},mazurka_mathilde:{danceId:"mazurka",name:"Mazurka à Mathilde",notation:"mazurka_a_mathilde.abc"},mazurka_italienne:{danceId:"mazurka",name:"Mazurka italienne",notation:"mazurka_italienne.abc"},misirlou:{danceId:"klezmer",name:"Misirlou",notation:"misirlou.abc",youtube:"ZIU0RMV_II8"},montagnarde:{danceId:"bourree_2t",name:"La Montagnarde",notation:"montagnarde.abc"},pas_du_loup:{danceId:"n_c",name:"Pas du Loup",notation:"pas_du_loup.abc"},pieternelle:{danceId:"n_c",name:"La Pieternelle",notation:"pieternelle.abc"},pinagay:{danceId:"branle_coupe",name:"Pinagay"},polka_john_ryan:{danceId:"polka",name:"John Ryan's Polka",notation:"john_ryan_s_polka.abc",youtube:"dHdI0eLk4Lw"},polka_kerry_frog:{danceId:"polka",name:"Kerry  et Frog's Polkas",notation:"polka_kerry_et_frogs.abc",youtube:"K0CNLqMpLlY"},polka_mirepoix_pepere:{danceId:"polka",name:"Mirepoix et Pepère",notation:"polka_de_mirepoix_et_polka_a_pepere.abc",youtube:"n9Bunh3bEH0"},polka_russe:{danceId:"polka",name:"Polka Russe",notation:"polka_russe.abc"},porcher:{danceId:"n_c",name:"Le Porcher",notation:"porcher.abc"},poules_gm:{danceId:"cercle_circassien",name:"Les poules de ma grand-mère",notation:"poules_de_ma_grand_mere.abc"},raves:{danceId:"bourree_3t",name:"les raves (j'emmerde la moitié du monde)",notation:"sabotee_raves.abc",youtube:"K0CNLqMpLlY"},rond_Landeda:{danceId:"rond_Landeda",name:"Rond de Landeda",notation:"rond_de_landeda_1_et_2.abc",youtube:"8s134J5P3xA"},scot_bourbon:{danceId:"scottish",name:"Scottish Bourbonnaise",notation:"scot_bourbonnaise.abc"},scot_catineau:{danceId:"scottish",name:"Scottish à Catineau",notation:"scottish_a_catineaux.abc"},scot_crassier:{danceId:"scottish",name:"Scottish du Crassier",notation:"scottish_du_crassier.abc"},scot_grand_sud:{danceId:"scottish",name:"Scottish du Grand Sud",notation:"scottish_du_grand_sud.abc"},Sejna:{danceId:"klezmer",name:"Sejna",notation:"sejna.abc"},sorciers_marloup:{danceId:"bourree_3t",name:"Les sorciers de Marloup"},spezet:{danceId:"andro",name:"Spezet",notation:"pardon_spezed.abc"},"Tzadik katamar":{danceId:"klezmer",name:"Tzadik Katamar",notation:"tzadik_katamar.abc",youtube:"F0HDKA3IaKs"},voici_mois_mai:{authors:"Ciac Boum",danceId:"rond_barbatre",name:"Voici le mois de Mai",rights:1,youtube:"DrBmlu7Qz0k"},youp_nanette:{danceId:"bourree_2t",name:"Youp Nanette",notation:"youp_nanette.abc"}}}],an=Xn(),Lo=po(an),yo=ho(an);an.setJson(JSON.stringify(fo));Lo.setRelationshipDefinition("musicDance","music","dance","danceId");yo.setIndexDefinition("danceAsc","dance","name","name",(a,t)=>a<t?-1:1);export{vo as G,an as s};
